---
layout: page.html
---

<h1>Instant, themed Twitch chat overlays</h1>
<div class="col-2">
	<form id="overlay-builder">
		<label for="channel">Channel name</label>
		<input
			type="text"
			id="channel"
			name="channel"
			required="true"
			autocomplete="off"
			autocorrect="off"
			autocapitalize="off"
			spellcheck="false"
		/>

		<label for="theme">Theme</label>
		<select id="theme" name="theme">
			<option value="default">Default</option>
			<option value="light">Light</option>
			{%- for theme in themes.list -%} {%- unless theme == "default" or theme
			=="light" -%}
			<option value="{{ theme }}">{{ theme | formatThemeName }}</option>
			{%- endunless -%} {%- endfor %}
		</select>

		<button type="submit" style="margin-top: 1em">Get my URL!</button>

		<div>
			<output></output>
		</div>
	</form>

	<iframe
		id="preview"
		src="/c/showmychat?DEMO=true"
		frameborder="0"
		allowtransparency="true"
	>
	</iframe>
</div>
<script>
	const overlayBuilderForm = document.getElementById('overlay-builder');
	const linkOutput = document.querySelector('output');
	const preview = document.getElementById('preview');
	const allFields = document.querySelectorAll('[name]');
	overlayBuilderForm.addEventListener('submit', handleSubmit);
	allFields.forEach((field) => field.addEventListener('change', updatePreview));

	/**
	 * @param {object} event - The form submit event
	 */
	function handleSubmit(event) {
		event.preventDefault();

		const values = new FormData(overlayBuilderForm);
		const channelName = values.get('channel');
		values.delete('channel');
		if (values.get('theme') === 'default') {
			values.delete('theme');
		}
		const queryParams = new URLSearchParams(values).toString();
		const paramString = queryParams ? `?${queryParams}` : '';

		linkOutput.innerHTML = `<strong>showmy.chat/c/</strong>${channelName}${paramString}`;
	}

	/**
	 *
	 */
	function updatePreview() {
		const values = new FormData(overlayBuilderForm);
		const channelName = values.get('channel') || 'showmychat';
		values.delete('channel');
		if (values.get('theme') === 'default') {
			values.delete('theme');
		}
		values.append('DEMO', 'true');
		const queries = new URLSearchParams(values).toString();
		preview.contentWindow.location.replace(`/c/${channelName}?${queries}`);
	}
</script>
<style>
	:root {
		color-scheme: light dark;
	}
	html {font-family: serif;color:rgb(0 0 0 / 50%);opacity:50%}

	.col-2 {
		display: flex;
		gap: 4em;
	}

	.col-2 > * {
		width: 50%;
	}

	#preview {
		min-height: 30em;
		height: 100%;
		background: transparent;
		background: var(--code-background-color);
		position: sticky;
		top: 3em;
		resize: both;
	}

	@media (max-width: 576px) {
		.col-2 {
			flex-direction: column;
		}

		.col-2 > * {
			width: 100%;
		}
	}
</style>
